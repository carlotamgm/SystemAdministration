PRÁCTICA 5
Primero hemos descargado lvm2 ejecutando “sudo apt install lvm2” y mediante “systemctl list-units” hemos comprobado que el sistema está corriendo. 
Posteriormente, hemos añadido un nuevo disco dentro del campo storage de debian-as1, le hemos dado un tamaño de 100MB y le hemos asignado el controlador SATA. Para comprobar que se ha creado correctamente ejecutamos “lsblk” y vemos que aparece “sdb”.
Para realizar la partición, hemos instalado “parted” mediante “sudo apt install parted” y creamos la tabla de partición GUID en el disco ejecutando “sudo parted /dev/sdb mklabel gpt”. Una vez dentro haciendo "sudo parted /dev/sdb", ejecutamos “unit %” para que reconozca porcentajes y creamos las dos particiones mediante “mkpart primary ext3 10% 20%” y “mkpart primary ext4 20% 30%”. La ponemos empezando en 10% por posibles problemas de alineamiento. Aseguramos el alineamiento óptimo de la partición con “align-check opt 1” y “align-check opt 2”.
A continuación, hemos creado los sistemas de ficheros mediante “sudo mkfs -t ext3 /dev/sdb1” y “sudo mkfs -t ext4 /dev/sdb2”. Los montamos ejecutando “sudo mount /dev/sdb1 /media/sisfich” y “sudo mount /dev/sdb2 /media/sisfich2” y verificamos su correcto montaje en el fichero /etc/mtab. Los puntos de montaje han sido previamente creados.
Para que el sistema monte las particiones en el arranque, modificamos el fichero /etc/fstab ejecutando “echo ‘LABEL=p1 /media/sisfich ext3 defaults 0 0’ >> /etc/fstab” y “echo ‘LABEL=p2 /media/sisfich2 ext4 defaults 0 0’ >> /etc/fstab”. Asignamos las etiquetas con “sudo e2label /dev/sdb1 p1” y “sudo e2label /dev/sdb2 p2”, montamos con “sudo mount -a”, re arrancamos la máquina y comprobamos los montajes con “df”.
El script practica5_parte2.sh se ejecuta pasándole una IP de parámetro y este hace ssh de los comandos “sfdisk –s”, “sfdisk –l” y “df -hT -x tmpfs” (lo último para ignorar la información de tmpfs). Como en debian-as2 solo hay un disco, solo aparece la información de ese (/dev/sda) mientras que para debian-as1 aparece la información de cada uno de sus discos (/dev/sda y /dev/sdb).
Para crear la partición de tipo LVM del nuevo disco en la máquina debian-as1, se ha instalado fdisk con “sudo apt install fdisk”, se ha utilizado “sudo fdisk /dev/sdc” para seleccionar el disco y ya dentro de fdisk: hemos añadido una nueva partición ejecutando “n”, hemos tecleado “p” al ser primaria y 1 porque es la primera partición. Hemos definido el valor inicial y final del tamaño de partición y después de crearla, tecleamos “t” para cambiar su tipo y escribimos “8e” que es el código para Linux LVM. Finalmente ejecutamos “w” para guardar y salir de fdisk. Comprobamos con “sudo fdisk  --list /dev/sdc”. 
Creamos un grupo volumen mediante “sudo vgcreate vg_p5 /dev/sdc1”  y programamos el script practica5_parte3_vg.sh para extenderlo añadiendo las particiones creadas en la parte 1. Se deben desmontar las particiones (“sudo umount /media/sisfich” y “sudo umount /media/sisfich2”) antes de agregarlas a un grupo de volúmenes o extender un grupo en LVM ya que así se garantiza la integridad y consistencia de los datos y también debemos eliminar las líneas del fichero /etc/fstab que permitían el montaje automático al arrancar. Ejecutamos el script con “sudo ./practica5_parte3_vg.sh vg_p5 /dev/sdb1 /dev/sdb2” y con “sudo vgdisplay” vemos que posee 3 volúmenes físicos: /dev/sdc1, /dev/sdb1 y /dev/sdb2.
A continuación, creamos el fichero practica5_parte3_lv.sh para crear volúmenes lógicos. Le pasamos como parámetros la especificación “vg_p5,lv_p5,500M,ext4,/mnt” y tras la ejecución, realizamos “sudo lvdisplay” para comprobar la correcta creación de lv_p5. 
Por último, volvemos a ejecutar el script con la misma especificación para comprobar que también realiza bien la extensión.